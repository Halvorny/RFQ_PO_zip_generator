<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Drawing Package Builder (RFQ / PO)</title>
  <meta name="description" content="Turn an export.zip into RFQ or PO drawing packages. 100% client-side."/>
  <link rel="stylesheet" href="assets/styles.css?v=3"/>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Drawing Package Builder <span class="pill">client‑side</span></h1>
      <span class="muted">Drop export ⇒ get RFQ/PO package (keeps PN/DRW folders) + Document List PDFs</span>
    </header>

    <div class="grid">
      <section class="card">
        <h2>1) Upload your export zip</h2>
        <div id="drop" class="drop" tabindex="0" role="button" aria-label="Upload a .zip by click or drag-and-drop">
          <input id="file" type="file" accept=".zip,application/zip"/>
          <div class="muted">Drag & drop here, or <label for="file" class="btn">Browse…</label></div>
          <div id="fileInfo" style="margin-top:8px"></div>
        </div>
        <div style="margin-top:12px">
          <div class="progress" aria-label="Progress"><div class="bar" id="bar"></div></div>
          <div class="row" style="justify-content:space-between;margin-top:6px">
            <div id="stats" class="muted">No file loaded.</div>
            <div class="row">
              <button id="btnPreview" class="btn" disabled>Preview structure</button>
              <button id="btnGo" class="btn primary" disabled>Build & Download ZIP</button>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>2) Mode & options</h2>
        <div class="row" style="gap:12px;margin-bottom:8px">
          <label>Mode:
            <select id="mode" class="sel">
              <option value="rfq">RFQ — PDFs only</option>
              <option value="po" selected>PO — PDFs + DXF + STP(+STEP)</option>
            </select>
          </label>
          <label>Root folder:
            <input id="rootName" class="txt" value="PO Drawing package" placeholder="e.g., PO6142 Drawing package"/>
          </label>
          <button id="btnPdfRFQ" class="btn" disabled>Download RFQ Document list (PDF)</button>
          <button id="btnPdfPO" class="btn" disabled>Download PO Document list (PDF)</button>
        </div>
        <div class="row" style="gap:16px">
          <label class="chk"><input id="stripTop" type="checkbox" checked/> Strip top export folder (auto-detected)</label>
          <label class="chk"><input id="includeUnknown" type="checkbox"/> Include non-matching under <code>attachments/</code></label>
        </div>
      </section>

      <section class="card">
        <h2>Output preview</h2>
        <pre id="preview" aria-live="polite" class="muted">(load a zip and click “Preview”)</pre>
      </section>

      <section class="card">
        <h2>Log</h2>
        <div id="log" class="log" aria-live="polite"></div>
      </section>
    </div>

    <footer>
      <div>Privacy: files never leave your browser. For large zips (&gt;~200 MB), use Chrome/Edge.</div>
      <div>Libraries: JSZip + jsPDF from CDNs (no integrity attributes). Self‑host if needed.</div>
    </footer>
  </div>

  <!-- JSZip and jsPDF from CDNs (no integrity) -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- App logic -->
  <script defer src="assets/app.js?v=3"></script>
  <script defer src="assets/pdf.js?v=3"></script>
</body>
</html>
